# Code Generation 
Dashboard API for Go

The Meraki Dashboard API Golang library provides all current Meraki [dashboard API](https://developer.cisco.com/meraki/api-v1/) calls to interface with the Cisco Meraki cloud-managed platform.

This library is automatically generated using the [OpenAPI generator v5.3](https://github.com/OpenAPITools/openapi-generator) using the [Meraki OpenAPI v2 specification](https://github.com/meraki/openapi/).

## Build Automation

New versions of this HTTP client are automatically generated by a [GitHub action](.github/workflows/main.yml) that triggers on a push to the main branch and will read the targeted version from the file `meraki-openapi-version.txt` in the root of the project. The version string in this file corresponds to the release version on the meraki openapi project page. To initiate a new client build (along with the corresponding tag and release), update the `meraki-openapi-version.txt` to the desired version and push to main.

The `templates` directory contains the templates used to generate the client. Customizations to these templates are the supported workflow for pre-generation code changes. 

This library is automatically generated using the [OpenAPI generator v5.3](https://github.com/OpenAPITools/openapi-generator) using the [Meraki OpenAPI v2 specification](https://github.com/meraki/openapi/).


## Generate a new HTTP Client with Makefile

To use the Makefile, you can run the following commands:

`make install-generator`: Downloads and installs the OpenAPI generator JAR file.
`make download-spec`: Downloads the specified version of the Meraki OpenAPI spec.
`make generate-code`: Runs the code generator to generate the client code using the downloaded spec.
`make cleanup`: Cleans up the build files by removing the downloaded spec.

you can simply run `make all` to execute all the commands in order. 
This will install the generator, download the spec, generate the code, and perform the cleanup.

Alternatively, You can execute each step individually or run `make` followed by the target name to execute the steps sequentially.
For example, `make install-generator download-spec generate-code` will execute all three steps in order.


## Manually generate a new HTTP Client

While there isn't a requirement to generate this library, it can be accomplished with the commands below.


1) Install or download the latest[ OpenAPI generator](https://github.com/OpenAPITools/openapi-generator#1---installation) jar file:
```shell
wget https://repo1.maven.org/maven2/org/openapitools/openapi-generator-cli/6.2.1/openapi-generator-cli-6.2.1.jar -O .openapi/generator/openapi-generator-cli.jar
```

2) Set the API version as an environmental variable:
```shell
API_VERSION="v1.34.0"
```

3) Download the specified version of the Meraki openAPI spec:
```shell
wget https://github.com/meraki/openapi/archive/refs/tags/$API_VERSION.zip && unzip -j $API_VERSION.zip '*/spec3.json'
```

4) Remove any existing client code:
```shell
rm -rf client/
```

5) Run the code generator jar:
```shell
java -jar .openapi/generator/openapi-generator-cli.jar generate \
  -i spec3.json \
  -g go \
  -o client \
  -p enumClassPrefix=true \
  -p structPrefix=true \
  -p packageVersion=$API_VERSION \
  -t .openapi/templates \
  --package-name client \
  --git-user-id meraki \
  --git-repo-id dashboard-api-go \
  --git-host github.com
```

6) Cleanup the build files:
```shell

rm $API_VERSION.zip; rm spec3.json

```

Use the `-t` option to specify the template directory. This is an override to the default templates which contains code tailored to this specific API client.

While these instructions are intended for go, you could customize this workflow to generate HTTP clients in [most languages](https://openapi-generator.tech/docs/generators/)